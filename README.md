# Инструкция по развертыванию системы

Для развертывания системы понадобятся следующие устройства

1. Любой Wi-Fi Роутер
2. Любой клиент генерирующий траффик в сети
3. Устройство-сканнер (Raspberry PI 4/B3+)
4. Любое устройство-сервер для развертывания thingsboard и обработки пакетов

## 1. Организация сети

Клиент и сканнер должны быть подключены к сети выбранного Wi-Fi роутера. Клиент обязательно должен быть подключен по Wi-Fi, сканнер по проводу.

#### Требования к клиенту

Клиент должен постоянно генерировать трафик в сети, в противном случае система не будет корректно работать.

#### Требования к сканеру
Сканнер должен быть доступен по SSH, для заброски файлов и запуска скриптов. На сканнер требуется собрать и установить прошивку с утилитой [Nexmon CSI](https://github.com/seemoo-lab/nexmon_csi). 

Требуется поставить язык `Python` версии 3.х+ и пакетный менеджер `pip`. Для передачи данных на сервер требуется поставить клиент [Mosquitto](https://mosquitto.org/)
Положить содержимое папки `scanner_scripts` по в папку `/home/pi`. Для корректной работы скрипта сканирования требуется также установить библиотеки `nexcsi`, `numpy`. Запускать скрипт `scanner.py` нужно только под root-ом.

#### Требования к серверу

Расположение в сетевой структуре сервера не имеет значения. Он так же как и сканнер должен быть доступен по SSH.
Для работы сервера также требуется установить язык `Python` версии 3.х+ и пакетный менеджер `pip`. Для корректной работы скрипта процессинга требуется также установить библиотеки `skimage`,`pandas`, `paho-mqtt`, `numpy`, `tensorflow`. Клиент Mosquitto также обязателен к установке

Развернуть на сервере сервис [Thingsboard](https://thingsboard.io/docs/user-guide/install/installation-options/). И добавить устройство сканнер в список устройств. Импортировать дэшборд из папки `/dashboard`

## 2. Обучение модели

Для обучения модели необходимо скачать датасет по [ссылке](https://drive.google.com/drive/folders/1l3io4lQNG5fvRGzutW2j8raW9IFS65oK?usp=sharing) и положить его в корневую папку. Далее пройти по этапам ноутбука `nn_notebook`. Готовую модель сохранить и перенести на сервер рядом со скриптом `proccessor.py`

## 3. Запуск сети

1. На сервере запустить скрипт `processor.py`, предварительно установив правильные адреса в исходном коде
2. На сканнере запустить скрипт `scanner.py`, предварительно установив правильные адреса в исходном коде
3. Зайти на дэшборд и наблюдать за активностью
